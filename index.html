<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대화형 제약 인포그래픽: 아세트아미노펜 탐구</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Energetic & Playful -->
    <!-- Application Structure Plan: This is a merged application. It combines the interactive structure of the 'Virtual Lab' with the visual design and data presentation style of the 'Infographic'. The structure maintains the lab's interactive sections (Intro, Experiment, Deep Dive, Conclusion) but restyles them with the infographic's vibrant colors and clearer chart layout (horizontal bar chart). This fusion aims to create a single, highly engaging and informative experience that is both interactive and visually compelling. -->
    <!-- Visualization & Content Choices: The core visualization is now a horizontal bar chart from the infographic, implemented in Chart.js, as it's better for comparing categories with long labels. This chart is still populated interactively via user clicks, preserving the lab's core interaction. The lab's beaker simulation is kept for engagement. The infographic's clear, icon-based layouts are used for static informational sections. All choices prioritize clarity, interactivity, and visual appeal, without using SVG or Mermaid JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f2f5;
        }
        html {
            scroll-behavior: smooth;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            height: 350px;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .beaker-simulation {
            width: 150px;
            height: 200px;
            border: 5px solid #58508d;
            border-top: none;
            border-radius: 0 0 20px 20px;
            position: relative;
            background: linear-gradient(to top, #61a5ff 60%, transparent 60%);
            margin: 20px auto;
        }
        .beaker-simulation::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -15px;
            right: -15px;
            height: 10px;
            background-color: #58508d;
            border-radius: 5px;
        }
        .drug-particle {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            transition: all 1.5s ease-in-out;
        }
        .tablet { width: 60px; height: 15px; background-color: #f1f5f9; border-radius: 8px; border: 1px solid #94a3b8; }
        .capsule { width: 70px; height: 25px; background-color: #ff6361; border-radius: 15px; position: relative; overflow: hidden; }
        .capsule::after { content: ''; position: absolute; top: 0; left: 50%; width: 50%; height: 100%; background-color: #ff8a88; }
        .powder { width: 0px; height: 0px; border-radius: 50%; box-shadow: 0 0 30px 20px #f8fafc; }
        .er-tablet { width: 65px; height: 18px; background: linear-gradient(45deg, #e2e8f0, #f1f5f9); border-radius: 10px; border: 1px solid #64748b; }

        .disintegrate { animation: disintegrate 2s forwards; }
        @keyframes disintegrate {
            0% { transform: translateX(-50%) scale(1); opacity: 1; }
            100% { transform: translateX(-50%) scale(0.5) translateY(-50px); opacity: 0; box-shadow: 0 0 50px 30px #f8fafc; }
        }
        .burst { animation: burst 1.5s forwards; }
        @keyframes burst {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.2); }
            100% { transform: translateX(-50%) scale(0); opacity: 0; }
        }
        .dissolve { animation: dissolve 1s forwards; }
        @keyframes dissolve {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }
        .slow-disintegrate { animation: slow-disintegrate 3s forwards; }
        @keyframes slow-disintegrate {
            0% { transform: translateX(-50%) scale(1); opacity: 1; }
            50% { transform: translateX(-50%) scale(0.95); opacity: 0.8; }
            100% { transform: translateX(-50%) scale(0.8) translateY(-20px); opacity: 0.2; }
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="bg-white/90 backdrop-blur-md sticky top-0 z-50 shadow-md">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-black text-[#003f5c]">제약 탐구 인포그래픽</h1>
            <div class="hidden md:flex space-x-6 text-lg font-bold">
                <a href="#intro" class="hover:text-[#ff6361] transition-colors">기초 원리</a>
                <a href="#lab" class="hover:text-[#ff6361] transition-colors">인터랙티브 실험</a>
                <a href="#deep-dive" class="hover:text-[#ff6361] transition-colors">심층 탐구</a>
                <a href="#conclusion" class="hover:text-[#ff6361] transition-colors">결론</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-gray-700 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="#intro" class="block text-lg font-bold hover:text-[#ff6361] transition-colors">기초 원리</a>
            <a href="#lab" class="block text-lg font-bold hover:text-[#ff6361] transition-colors">인터랙티브 실험</a>
            <a href="#deep-dive" class="block text-lg font-bold hover:text-[#ff6361] transition-colors">심층 탐구</a>
            <a href="#conclusion" class="block text-lg font-bold hover:text-[#ff6361] transition-colors">결론</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-12">

        <section id="intro" class="text-center my-8 md:my-12">
            <h2 class="text-4xl md:text-5xl font-black text-[#003f5c]">약품 제형의 비밀</h2>
            <p class="text-xl md:text-2xl mt-4 text-[#58508d]">같은 아세트아미노펜, 왜 다른 모양일까?</p>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mt-8 mb-12">
                약의 효과는 '제형'에 따라 우리 몸에서 작용하는 속도와 방식이 결정됩니다. 약효가 나타나기까지의 핵심 과정을 알아봅시다.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 max-w-5xl mx-auto">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 text-center">
                    <div class="text-5xl mb-3">💊</div>
                    <h3 class="text-xl font-bold text-[#bc5090] mb-2">붕해</h3>
                    <p class="text-gray-600">고체 약이 잘게 부서지는 첫 단계입니다.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 text-center">
                    <div class="text-5xl mb-3">💧</div>
                    <h3 class="text-xl font-bold text-[#bc5090] mb-2">용출</h3>
                    <p class="text-gray-600">약 성분이 체액에 녹아 나옵니다.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 text-center">
                    <div class="text-5xl mb-3">🚀</div>
                    <h3 class="text-xl font-bold text-[#bc5090] mb-2">흡수</h3>
                    <p class="text-gray-600">약 성분이 혈액으로 들어갑니다.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 text-center">
                    <div class="text-5xl mb-3">🎯</div>
                    <h3 class="text-xl font-bold text-[#bc5090] mb-2">작용</h3>
                    <p class="text-gray-600">드디어 약효가 발현됩니다.</p>
                </div>
            </div>
        </section>

        <section id="lab" class="my-16 md:my-24 p-6 md:p-10 bg-white rounded-2xl shadow-xl border border-gray-200">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-black text-[#003f5c]">인터랙티브 붕해 실험</h2>
                <p class="max-w-3xl mx-auto text-lg text-gray-600 mt-4">
                    다양한 제형의 아세트아미노펜을 인공 위액에 넣고 붕해 시간을 비교해봅시다. 아래 버튼을 눌러 실험하고, 차트의 변화를 관찰하세요.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 items-center">
                <div class="lg:col-span-2 text-center">
                    <h3 class="text-2xl font-bold mb-6 text-[#58508d]">실험할 제형 선택</h3>
                    <div id="drug-selector" class="grid grid-cols-2 gap-4 max-w-md mx-auto">
                    </div>
                    <div class="mt-8">
                        <div class="beaker-simulation">
                            <div id="drug-particle-container"></div>
                        </div>
                        <p id="simulation-text" class="text-gray-500 h-6 mt-2 font-semibold"></p>
                    </div>
                </div>

                <div class="lg:col-span-3">
                    <div class="chart-container">
                        <canvas id="disintegrationChart"></canvas>
                    </div>
                    <div id="analysis-box" class="mt-6 bg-[#f0f2f5] p-6 rounded-lg min-h-[120px]">
                        <h4 class="font-bold text-xl mb-2 text-[#003f5c]">분석 결과</h4>
                        <p id="analysis-text" class="text-gray-700">실험할 제형을 선택하면 이곳에 분석 결과가 표시됩니다.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="deep-dive" class="my-16 md:my-24">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-black text-[#003f5c]">속도의 과학: 왜 차이가 날까?</h2>
                <p class="max-w-3xl mx-auto text-lg text-gray-600 mt-4">
                    제형별 붕해 속도 차이에 숨겨진 과학적 원리를 더 깊이 탐구해봅시다.
                </p>
            </div>
            <div id="accordion-container" class="space-y-4 max-w-4xl mx-auto">
            </div>
        </section>

        <section id="conclusion" class="text-center bg-white p-8 md:p-12 rounded-2xl shadow-xl border border-gray-200">
            <h2 class="text-3xl md:text-4xl font-black text-[#003f5c]">결론 및 다음 탐구 제안</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 my-8">
                이번 탐구를 통해 제형이 약효 발현 속도를 결정하는 '설계도'임을 확인했습니다. 제약 과학의 세계는 여기서 끝나지 않습니다. 다음 단계로 넘어가 볼까요?
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-gray-100 p-6 rounded-xl">
                    <h3 class="font-bold text-xl mb-2 text-[#58508d]">🔬 환경 확장</h3>
                    <p>인공 장액(pH 6.8)을 만들어 위와 장 환경에서의 붕해 차이를 비교해봅시다.</p>
                </div>
                <div class="bg-gray-100 p-6 rounded-xl">
                    <h3 class="font-bold text-xl mb-2 text-[#58508d]">💪 변인 탐구</h3>
                    <p>정제의 단단함(경도)이 붕해 속도에 어떤 영향을 미치는지 탐구해봅시다.</p>
                </div>
                <div class="bg-gray-100 p-6 rounded-xl">
                    <h3 class="font-bold text-xl mb-2 text-[#58508d]">🚀 첨단 기술</h3>
                    <p>입에서 녹는 필름, 나노입자 등 차세대 약물 전달 시스템(DDS)을 조사해봅시다.</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center py-6 bg-gray-200 mt-12">
        <p class="text-gray-600">본 페이지는 '약품 제형에 따른 붕해도 탐구' 보고서 내용을 기반으로 제작된 교육용 애플리케이션입니다.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const drugData = [
                { id: 'powder', name: '현탁용 산제', time: 0.5, particleClass: 'powder', animationClass: 'dissolve', description: '가루약은 이미 붕해된 상태이므로 물에 넣자마자 거의 즉시(약 30초 내) 분산됩니다. 붕해 과정이 없어 용출 및 흡수가 매우 빠릅니다.' },
                { id: 'chewable', name: '츄어블정', time: 2, particleClass: 'tablet', animationClass: 'disintegrate', description: '츄어블정은 약 2분 내로 빠르게 붕해됩니다. 입안에서 씹어먹는 것을 가정하여, 쉽게 부서지도록 만들어졌습니다.' },
                { id: 'standard', name: '표준 정제', time: 13, particleClass: 'tablet', animationClass: 'disintegrate', description: '표준 정제는 약 13분 내에 붕해됩니다. 약효 성분과 부형제가 압축된 가장 기본적인 형태로, 위액에 닿으면 부풀어 오르며 부서집니다.' },
                { id: 'softgel', name: '연질 캡슐', time: 15, particleClass: 'capsule', animationClass: 'burst', description: '연질 캡슐은 약 15분 후 젤라틴 껍질이 터지면서 붕해됩니다. 일단 터지면 이미 녹아있는 액상 내용물이 빠르게 흡수될 수 있습니다.' },
                { id: 'er', name: '서방성 정제', time: 70, particleClass: 'er-tablet', animationClass: 'slow-disintegrate', description: '서방성 정제는 1시간 이상 천천히 붕해됩니다. 특수 구조가 약물이 서서히 방출되도록 제어하여 약효가 오래 지속되도록 설계되었습니다.' }
            ];

            const accordionData = [
                { title: '속도의 과학: 속효성 제제', content: '일부 빠른 효과를 내는 약에는 탄산수소나트륨($NaHCO_3$)이 들어있습니다. 이것이 위산(HCl)과 만나면 이산화탄소($CO_2$) 기체를 발생시켜, 정제 내부에서부터 터져 나오게 만들어 붕해를 극적으로 가속합니다.' },
                { title: '시간과의 싸움: 속방성(IR) vs 서방성(ER)', content: '속방정(IR)은 빨리 녹아 효과를 내는 데 집중하지만, 서방정(ER)은 약효를 오래 지속시키는 것이 목표입니다. ER 제제는 특수 고분자 매트릭스로 약물을 감싸, 수 시간에 걸쳐 서서히 방출되도록 합니다.' },
                { title: '형태와 기능: 정제 vs 연질 캡슐', content: '흔히 연질 캡슐이 더 빠를 것이라 생각하지만, 젤라틴 껍질이 녹고 터지는 데 시간이 걸려 고체 정제보다 붕해가 느릴 수 있습니다. 즉, \'붕해\'와 \'흡수\'는 다른 단계입니다.' }
            ];

            const drugSelector = document.getElementById('drug-selector');
            drugData.forEach(drug => {
                const button = document.createElement('button');
                button.className = 'w-full bg-white hover:bg-orange-100 text-[#003f5c] font-bold py-3 px-4 border-2 border-[#58508d] rounded-lg shadow-md transition-all duration-200 transform hover:scale-105';
                button.textContent = drug.name;
                button.dataset.drugId = drug.id;
                drugSelector.appendChild(button);
            });

            const accordionContainer = document.getElementById('accordion-container');
            accordionData.forEach((item) => {
                const wrapper = document.createElement('div');
                wrapper.className = 'bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden';
                wrapper.innerHTML = `
                    <button class="accordion-toggle w-full text-left p-5 font-bold text-lg text-[#003f5c] flex justify-between items-center hover:bg-gray-50 transition-colors">
                        <span>${item.title}</span>
                        <svg class="w-6 h-6 transform transition-transform duration-300 text-[#ff6361]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                        <div class="p-5 pt-0 text-gray-700">
                            <p>${item.content.replace(/\$(.*?)\$/g, '<code class="bg-gray-200 text-red-600 font-mono p-1 rounded">$1</code>')}</p>
                        </div>
                    </div>
                `;
                accordionContainer.appendChild(wrapper);
            });

            document.querySelectorAll('.accordion-toggle').forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('svg');
                    const isOpening = !(content.style.maxHeight && content.style.maxHeight !== '0px');
                    
                    document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = '0px');
                    document.querySelectorAll('.accordion-toggle svg').forEach(i => i.classList.remove('rotate-180'));

                    if (isOpening) {
                        content.style.maxHeight = content.scrollHeight + 'px';
                        icon.classList.add('rotate-180');
                    }
                });
            });

            const ctx = document.getElementById('disintegrationChart').getContext('2d');
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: '붕해 시간 (분)',
                        data: [],
                        backgroundColor: ['#ffa600', '#ff6361', '#bc5090', '#58508d', '#003f5c'],
                        borderColor: '#ffffff',
                        borderWidth: 2,
                        borderRadius: 5,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: '평균 붕해 시간 (분)', font: { size: 14, weight: 'bold' }, color: '#003f5c' },
                            grid: { color: '#e2e8f0' }
                        },
                        y: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#003f5c',
                            titleFont: { size: 16, weight: 'bold' },
                            bodyFont: { size: 14 },
                            callbacks: {
                                label: (context) => ` ${context.dataset.label}: ${context.raw} 분`
                            }
                        }
                    }
                }
            });

            const analysisText = document.getElementById('analysis-text');
            const particleContainer = document.getElementById('drug-particle-container');
            const simulationText = document.getElementById('simulation-text');

            drugSelector.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    const drugId = e.target.dataset.drugId;
                    const drug = drugData.find(d => d.id === drugId);

                    if (drug && !chart.data.labels.includes(drug.name)) {
                        const sortedData = [...chart.data.datasets[0].data, drug.time];
                        const sortedLabels = [...chart.data.labels, drug.name];
                        
                        const paired = sortedLabels.map((label, index) => ({label, data: sortedData[index]}));
                        paired.sort((a, b) => a.data - b.data);

                        chart.data.labels = paired.map(p => p.label);
                        chart.data.datasets[0].data = paired.map(p => p.data);
                        
                        chart.update();
                    }
                    
                    analysisText.textContent = drug.description;
                    
                    particleContainer.innerHTML = `<div class="drug-particle ${drug.particleClass}"></div>`;
                    const particle = particleContainer.firstChild;
                    
                    simulationText.textContent = `${drug.name} 붕해 시뮬레이션...`;
                    setTimeout(() => particle.classList.add(drug.animationClass), 100);
                    setTimeout(() => simulationText.textContent = ``, 3000);
                }
            });

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
            });
        });
    </script>
</body>
</html>
